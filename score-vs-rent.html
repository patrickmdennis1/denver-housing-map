<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Candidate Properties — Score vs Rent</title>
<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #fafafa;
    color: #1a1a1a;
  }
  #header {
    padding: 24px 32px 16px;
    background: #fff;
    border-bottom: 1px solid #eee;
  }
  #header h1 { font-size: 20px; font-weight: 700; }
  #header p { font-size: 13px; color: #888; margin-top: 4px; }
  #chart { width: 100%; height: 70vh; min-height: 400px; }
  #table-section {
    padding: 16px 32px 32px;
    background: #fff;
    border-top: 1px solid #eee;
  }
  #table-section h2 { font-size: 15px; font-weight: 700; margin-bottom: 12px; }
  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  th { text-align: left; padding: 8px 10px; border-bottom: 2px solid #e0e0e0; color: #666; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
  td { padding: 7px 10px; border-bottom: 1px solid #f0f0f0; }
  tr:hover td { background: #f8f8f8; }
  .score-pill { display: inline-block; padding: 2px 8px; border-radius: 10px; color: #fff; font-weight: 700; font-size: 12px; }
  .score-high { background: #2E7D32; }
  .score-med { background: #66BB6A; }
  .score-low { background: #FDD835; color: #333; }
  .score-bad { background: #FF9800; }
  .hood-pill { display: inline-block; padding: 2px 8px; border-radius: 10px; color: #fff; font-size: 11px; }
  a.listing { color: #1a73e8; text-decoration: none; font-weight: 500; }
  a.listing:hover { text-decoration: underline; }
</style>
</head>
<body>

<div id="header">
  <h1>Candidate Properties — Desirability vs Cost</h1>
  <p>Top-left is the sweet spot: high Howie Score, low rent. Bubble size = sqft. Color = neighborhood. Listing links in table below.</p>
</div>

<div id="chart"></div>

<div id="table-section">
  <h2>All Properties</h2>
  <table>
    <thead>
      <tr><th>Score</th><th>Property</th><th>Neighborhood</th><th>Rent</th><th>Beds</th><th>Listing</th></tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>
</div>

<script>
const hoodColors = {
  "Five Points": "#E65100",
  "Highland": "#7B1FA2",
  "Capitol Hill": "#C2185B",
  "Washington Park": "#F9A825",
  "Congress Park": "#2E7D32",
  "City Park West": "#1565C0",
  "Sunnyside": "#00838F",
  "Sloan Lake": "#4E342E",
  "Platt Park": "#546E7A",
  "Cheesman Park": "#78909C",
};

const properties = [
  { name: "The Perrenoud #402", address: "1699 N Downing St #402", rent: 2375, sqft: 1665, beds: 2, score: 94, hood: "Capitol Hill", desc: "1901 penthouse — birdcage elevator, stained glass, 20ft ceilings", url: "https://www.apartments.com/1699-n-downing-st-denver-co/h5xcer2/" },
  { name: "1541 E 25th Ave", address: "1541 E 25th Ave", rent: 3290, sqft: 3169, beds: 4, score: 93, hood: "Five Points", desc: "Contemporary Whittier home. Wraparound deck, hot tub, firepit. Adjacent to Ben & Caitlin", url: "https://www.apartments.com/contemporary-whittier-home-with-wraparound-deck-denver-co/gtek7gz/" },
  { name: "3033 Welton St", address: "3033 Welton St", rent: 2995, sqft: 1554, beds: 3, score: 90, hood: "Five Points", desc: "~1884 Five Points. Exposed brick, 2 fireplaces, fire pit yard", url: "https://www.rent.com/r/3033-welton-st-denver-co-lv2660882333" },
  { name: "2900 Wyandot St 101", address: "2900 Wyandot St, Unit 101", rent: 4300, sqft: 2002, beds: 3, score: 85, hood: "Highland", desc: "1925 Sunnyside/Highland. No active listing — verify availability", url: "https://www.zillow.com/homedetails/2900-Wyandot-St-UNIT-101-Denver-CO-80211/82593755_zpid/" },
  { name: "2934 Glenarm Pl", address: "2934 Glenarm Pl", rent: 2550, sqft: 1129, beds: 3, score: 82, hood: "Five Points", desc: "Classic Denver home. Hardwood floors, granite, mudroom, backyard. Walk Score 93", url: "https://www.apartments.com/2934-glenarm-pl-denver-co/6pxr4ev/" },
  { name: "3222 W Hayward Pl", address: "3222 W Hayward Pl", rent: 2750, sqft: 1332, beds: 2, score: 80, hood: "Highland", desc: "1890 Victorian cottage. Hot tub, skylights, 2-car garage. Furnished", url: "https://www.apartments.com/3222-w-hayward-pl-denver-co/p68ryht/" },
  { name: "3101 Meade St", address: "3101 Meade St", rent: 4250, sqft: 1823, beds: 3, score: 79, hood: "Highland", desc: "1905 Denver Square one block from Highland Square. Garage, yard", url: "https://hotpads.com/3101-meade-st-denver-co-80211-1kz8jv8/pad" },
  { name: "575 N Ogden St", address: "575 N Ogden St", rent: 2650, sqft: 1350, beds: 3, score: 78, hood: "Capitol Hill", desc: "Craftsman bungalow — fireplace, honeybee hives, front porch", url: "https://www.rentable.co/denver-co/long-realty-and-property-management-3-bed-1-bath-single-family-in-the-heart-of-denver" },
  { name: "769 Monroe St", address: "769 Monroe St", rent: 2805, sqft: null, beds: 2, score: 73, hood: "Congress Park", desc: "Congress Park bungalow. 2-car garage, fenced yard, W/D, pets OK", url: "https://www.rent.com/r/769-monroe-st-denver-co-lv1440778231" },
  { name: "2820 Champa St", address: "2820 Champa St", rent: 3950, sqft: 2629, beds: 5, score: 72, hood: "Five Points", desc: "1886 Five Points. Exposed brick, fireplace, 2629sqft. No active listing", url: "https://www.zillow.com/homedetails/2210-N-Marion-St-Denver-CO-80205/88905567_zpid/" },
  { name: "2605 N Elizabeth St", address: "2605 N Elizabeth St", rent: 3000, sqft: 1539, beds: 4, score: 72, hood: "Five Points", desc: "1929 Five Points. No active listing. Multi-unit building", url: "https://www.zillow.com/homedetails/2605-N-Elizabeth-St-Denver-CO-80205/129899120_zpid/" },
  { name: "817 29th St", address: "817 29th St", rent: 6000, sqft: 2822, beds: 3, score: 65, hood: "Five Points", desc: "Five Points rental. 3bd, 2822sqft. Over budget", url: "https://www.zillow.com/homedetails/817-29th-St-Denver-CO-80205/444549553_zpid/" },
  { name: "3720 Lowell Blvd", address: "3720 Lowell Blvd", rent: 3600, sqft: 1210, beds: 3, score: 65, hood: "Highland", desc: "1890 Victorian in Highland. Front porch, cats + dogs OK", url: "https://www.apartments.com/enchanting-west-highland-victorian-home-by-denver-co/meczdyj/" },
  { name: "267 S Franklin St", address: "267 S Franklin St", rent: 3080, sqft: 1211, beds: 2, score: 65, hood: "Washington Park", desc: "1891 Wash Park Historic District. Stained glass, original woodwork", url: "https://www.apartments.com/267-s-franklin-st-denver-co/mhz484k/" },
  { name: "2757 Champa St", address: "2757 Champa St", rent: null, sqft: 1600, beds: 2, score: 65, hood: "Five Points", desc: "1890 San Rafael Historic District. Vaulted ceilings, skylight, exposed brick. Contact for price", url: "https://www.rent.com/r/2757-champa-st-denver-co-lv2613431675" },
  { name: "826 25th St", address: "826 25th St", rent: 2900, sqft: 1458, beds: 2, score: 62, hood: "Five Points", desc: "Five Points modern house. Attached garage, in-unit W/D. No charm", url: "https://www.apartments.com/826-25th-st-denver-co/pzqvt6t/" },
  { name: "920 E 24th Ave", address: "920 E 24th Ave", rent: 4800, sqft: 1829, beds: 3, score: 62, hood: "Five Points", desc: "1890 Victorian conversion. Near budget ceiling, above Rent Zestimate", url: "https://www.zillow.com/homedetails/920-E-24th-Ave-Denver-CO-80205/109688098_zpid/" },
  { name: "3048 California St", address: "3048 California St", rent: 2500, sqft: 966, beds: 2, score: 60, hood: "Five Points", desc: "~1885 Curtis Park. Exposed brick, 4 parking spots, in-unit W/D", url: "https://www.apartments.com/3048-california-st-denver-co/34gwm3g/" },
  { name: "1243 S Lincoln St", address: "1243 S Lincoln St", rent: 2995, sqft: null, beds: 4, score: 60, hood: "Platt Park", desc: "Platt Park. 4bd. Price dropped from $3395. Near RIGAR gym", url: "" },
  { name: "787 Corona St", address: "787 Corona St", rent: 1700, sqft: null, beds: 2, score: 58, hood: "Capitol Hill", desc: "Budget pick — 1925 Cap Hill brick. Private balcony, patio, in-unit W/D", url: "https://cornerstoneapartments.com/our-buildings/787-corona/" },
  { name: "2100 Humboldt St", address: "2100 Humboldt St", rent: 2250, sqft: null, beds: 2, score: 55, hood: "Five Points", desc: "Cole Victorian near Ben & Caitlin. 2bd/2ba. Pets OK, W/D", url: "https://www.apartments.com/2100-humboldt-st-denver-co/mvbw1cl/" },
  { name: "421 S Lincoln St", address: "421 S Lincoln St", rent: 2795, sqft: 2778, beds: 5, score: 45, hood: "Washington Park", desc: "1888 original Denver home. 5bd, 2778sqft. Huge value if solid", url: "https://hotpads.com/421-s-lincoln-st-denver-co-80209-1my060y/pad" },
  { name: "1688 Quitman St", address: "1688 Quitman St", rent: 4020, sqft: 1506, beds: 2, score: 20, hood: "Sloan Lake", desc: "Sloan's Lake area. Weaker neighborhood fit", url: "https://www.zillow.com/homedetails/1688-Quitman-St-ID1013132P-Denver-CO-80204/459288643_zpid/" },
  { name: "2431 Stout St", address: "2431 Stout St", rent: 6495, sqft: 2187, beds: 2, score: 10, hood: "Five Points", desc: "Over budget. Furnished, smart home. Built 2005, not historic", url: "https://www.zillow.com/homedetails/2431-Stout-St-Denver-CO-80205/82257191_zpid/" },
  { name: "1343 N High St 8", address: "1343 N High St, Apt 8", rent: 1800, sqft: 737, beds: 2, score: 10, hood: "Cheesman Park", desc: "Budget option. 737sqft — very small. No cats. No charm", url: "https://rental.turbotenant.com/p/1343-n-high-street-denver-co-unit-8/158753" },
  { name: "1770 S Washington St", address: "1770 S Washington St", rent: 7535, sqft: 3480, beds: 5, score: 8, hood: "Platt Park", desc: "Way over budget. Built 2017. No cats. Wrong on every priority", url: "https://www.zillow.com/homedetails/1770-S-Washington-St-Denver-CO-80210/13369602_zpid/" },
];

// Chart uses properties with rent
const chartProps = properties.filter(p => p.rent);
const hoods = [...new Set(chartProps.map(p => p.hood))];

const traces = hoods.map(hood => {
  const group = chartProps.filter(p => p.hood === hood);
  const color = hoodColors[hood] || '#999';
  return {
    x: group.map(p => p.rent),
    y: group.map(p => p.score),
    mode: 'markers+text', type: 'scatter', name: hood,
    text: group.map(p => p.name),
    textposition: 'top center',
    textfont: { size: 9, color: '#666' },
    hovertext: group.map(p =>
      `<b>${p.name}</b><br>${p.address}<br>` +
      `<b>$${p.rent.toLocaleString()}/mo</b> · ${p.sqft ? p.sqft.toLocaleString() + ' sqft · ' : ''}${p.beds} bed<br>` +
      `Howie Score: ${p.score} · ${p.hood}<br><i>${p.desc}</i>`
    ),
    hoverinfo: 'text',
    marker: {
      size: group.map(p => p.sqft ? Math.max(Math.sqrt(p.sqft) * 0.8, 14) : 14),
      color: color,
      line: { width: 2, color: '#fff' },
      opacity: 0.85, sizemode: 'diameter'
    },
  };
});

const budgetLine = { x: [5000, 5000], y: [0, 100], mode: 'lines', type: 'scatter', line: { color: '#D32F2F', width: 1.5, dash: 'dash' }, hoverinfo: 'none', showlegend: false };
const budgetLabel = { x: [5150], y: [97], mode: 'text', type: 'scatter', text: ['$5K Budget'], textfont: { size: 10, color: '#D32F2F' }, hoverinfo: 'none', showlegend: false };

const layout = {
  xaxis: { title: { text: 'Monthly Rent', font: { size: 13 } }, range: [1400, 8000], gridcolor: '#f0f0f0', zeroline: false, tickprefix: '$', tickformat: ',' },
  yaxis: { title: { text: 'Howie Score', font: { size: 13 } }, range: [0, 105], gridcolor: '#f0f0f0', zeroline: false },
  plot_bgcolor: '#fafafa', paper_bgcolor: '#fff',
  margin: { t: 20, r: 20, b: 60, l: 60 },
  legend: { orientation: 'h', y: -0.15, x: 0.5, xanchor: 'center', font: { size: 11 } },
  hovermode: 'closest',
  shapes: [
    { type: 'rect', x0: 1400, x1: 3500, y0: 75, y1: 105, fillcolor: 'rgba(46,125,50,0.06)', line: { width: 1, color: 'rgba(46,125,50,0.2)', dash: 'dot' }, layer: 'below' },
    { type: 'rect', x0: 5000, x1: 8000, y0: 0, y1: 40, fillcolor: 'rgba(211,47,47,0.04)', line: { width: 1, color: 'rgba(211,47,47,0.15)', dash: 'dot' }, layer: 'below' }
  ],
  annotations: [
    { x: 2000, y: 103, text: 'Sweet Spot', font: { size: 11, color: '#2E7D32' }, showarrow: false, xanchor: 'left' },
    { x: 7800, y: 5, text: 'Avoid', font: { size: 11, color: '#D32F2F' }, showarrow: false, xanchor: 'right' }
  ]
};

Plotly.newPlot('chart', [...traces, budgetLine, budgetLabel], layout, {
  responsive: true, displayModeBar: true,
  modeBarButtonsToRemove: ['lasso2d', 'select2d', 'autoScale2d'], displaylogo: false
});

// Build table
const tbody = document.getElementById('table-body');
properties.sort((a, b) => b.score - a.score).forEach(p => {
  const scoreClass = p.score >= 80 ? 'score-high' : p.score >= 60 ? 'score-med' : p.score >= 40 ? 'score-low' : 'score-bad';
  const hoodColor = hoodColors[p.hood] || '#999';
  const linkDomain = p.url ? new URL(p.url).hostname.replace('www.', '') : '';
  const linkHtml = p.url ? `<a class="listing" href="${p.url}" target="_blank">${linkDomain}</a>` : '<span style="color:#ccc">None</span>';
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td><span class="score-pill ${scoreClass}">${p.score}</span></td>
    <td><strong>${p.name}</strong><br><span style="color:#888;font-size:11px">${p.desc}</span></td>
    <td><span class="hood-pill" style="background:${hoodColor}">${p.hood}</span></td>
    <td>${p.rent ? '$' + p.rent.toLocaleString() : 'Contact'}</td>
    <td>${p.beds}</td>
    <td>${linkHtml}</td>
  `;
  tbody.appendChild(tr);
});
</script>
</body>
</html>
