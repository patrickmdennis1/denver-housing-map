<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Candidate Properties — Score vs Rent</title>
<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #fafafa;
    color: #1a1a1a;
  }
  #header {
    padding: 24px 32px 16px;
    background: #fff;
    border-bottom: 1px solid #eee;
  }
  #header h1 { font-size: 20px; font-weight: 700; }
  #header p { font-size: 13px; color: #888; margin-top: 4px; }
  #chart { width: 100%; height: 70vh; min-height: 400px; }
  #table-section {
    padding: 16px 32px 32px;
    background: #fff;
    border-top: 1px solid #eee;
  }
  #table-section h2 { font-size: 15px; font-weight: 700; margin-bottom: 12px; }
  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  th { text-align: left; padding: 8px 10px; border-bottom: 2px solid #e0e0e0; color: #666; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
  td { padding: 7px 10px; border-bottom: 1px solid #f0f0f0; }
  tr:hover td { background: #f8f8f8; }
  .score-pill { display: inline-block; padding: 2px 8px; border-radius: 10px; color: #fff; font-weight: 700; font-size: 12px; }
  .score-high { background: #2E7D32; }
  .score-med { background: #66BB6A; }
  .score-low { background: #FDD835; color: #333; }
  .score-bad { background: #FF9800; }
  .hood-pill { display: inline-block; padding: 2px 8px; border-radius: 10px; color: #fff; font-size: 11px; }
  a.listing { color: #1a73e8; text-decoration: none; font-weight: 500; }
  a.listing:hover { text-decoration: underline; }
</style>
</head>
<body>

<div id="header">
  <h1>Candidate Properties — Desirability vs Cost</h1>
  <p>Top-left is the sweet spot: high Overall Score, low rent. Bubble size = sqft. Color = neighborhood. Listing links in table below.</p>
</div>

<div id="chart"></div>

<div id="table-section">
  <h2>All Properties</h2>
  <table>
    <thead>
      <tr><th>Score</th><th>Property</th><th>Neighborhood</th><th>Rent</th><th>Beds</th><th>Listing</th></tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>
</div>

<script>
const hoodColors = {
  "Five Points": "#E65100",
  "Highland": "#7B1FA2",
  "Capitol Hill": "#C2185B",
  "Washington Park": "#F9A825",
  "Congress Park": "#2E7D32",
  "City Park West": "#1565C0",
  "Sunnyside": "#00838F",
  "Sloan Lake": "#4E342E",
  "Platt Park": "#546E7A",
  "Cheesman Park": "#78909C",
};

const properties = [
  // Active rentals (sorted by score)
  { name: "1623 Race St", address: "1623 Race St, Denver, CO 80206", rent: 3444, sqft: 1887, beds: 3, score: 86, hood: "City Park West", desc: "1883 dark wood moldings, fireplace, clawfoot tub, French windows. Walk Score 93. TOP PICK", url: "https://www.zillow.com/homedetails/1623-Race-St-Denver-CO-80206/13321719_zpid/" },
  { name: "600 Fillmore St", address: "600 Fillmore St, Denver, CO 80206", rent: 3295, sqft: 1906, beds: 2, score: 83, hood: "Congress Park", desc: "Tudor brick, fireplace, fenced yard, pets OK. 30% below Zestimate. TOP PICK", url: "https://www.zillow.com/homedetails/600-Fillmore-St-Denver-CO-80206/13328212_zpid/" },
  { name: "2631 N Humboldt St", address: "2631 N Humboldt St, Denver, CO 80205", rent: 3197, sqft: 1760, beds: 3, score: 81, hood: "Five Points", desc: "Victorian, dramatic staircase, fireplace, French doors, huge yard. Pet policy TBD", url: "https://www.zillow.com/homedetails/2631-N-Humboldt-St-Denver-CO-80205/13306745_zpid/" },
  { name: "2900 Wyandot St 101", address: "2900 Wyandot St, Unit 101", rent: 4300, sqft: 2002, beds: 3, score: 78, hood: "Highland", desc: "LoHi luxury, Walk Score 95, soaring ceilings", url: "https://www.zillow.com/homedetails/2900-Wyandot-St-UNIT-101-Denver-CO-80211/82593755_zpid/" },
  { name: "3033 Welton St", address: "3033 Welton St", rent: 2995, sqft: 1554, beds: 3, score: 76, hood: "Five Points", desc: "1884 Five Points. Exposed brick, flexible pricing. Near Ben & Caitlin", url: "https://www.rent.com/r/3033-welton-st-denver-co-lv2660882333" },
  { name: "2746 N Williams St", address: "2746 N Williams St", rent: 2700, sqft: 1045, beds: 2, score: 74, hood: "Five Points", desc: "1899 Whittier, exposed brick, 4 blocks from Ben & Caitlin", url: "https://www.zillow.com/homedetails/2746-N-Williams-St-Denver-CO-80205/13306659_zpid/" },
  { name: "3048 California St", address: "3048 California St", rent: 2500, sqft: 966, beds: 2, score: 74, hood: "Five Points", desc: "1884 Victorian, exposed brick, iron fence. $2,500 + $75 utils", url: "https://www.apartments.com/3048-california-st-denver-co/34gwm3g/" },
  { name: "817 29th St", address: "817 29th St", rent: 6000, sqft: 2822, beds: 3, score: 72, hood: "Five Points", desc: "1894 Denver Square, original fireplace. Over budget but 84 days = negotiate", url: "https://www.zillow.com/homedetails/817-29th-St-Denver-CO-80205/444549553_zpid/" },
  { name: "1346 S Pennsylvania", address: "1346 S Pennsylvania St", rent: 3450, sqft: 1500, beds: 3, score: 71, hood: "Platt Park", desc: "1906 brick bungalow, arched doorways, generic kitchen reno", url: "https://www.zillow.com/homedetails/1346-S-Pennsylvania-St-Denver-CO-80210/13368691_zpid/" },
  { name: "2605 N Elizabeth St", address: "2605 N Elizabeth St", rent: 3000, sqft: 1539, beds: 3, score: 70, hood: "Five Points", desc: "Exposed brick, Skyland. Re-listed", url: "https://www.zillow.com/homedetails/2605-N-Elizabeth-St-Denver-CO-80205/129899120_zpid/" },
  { name: "2229 N Lafayette", address: "2229 N Lafayette St", rent: 2350, sqft: 864, beds: 2, score: 70, hood: "Five Points", desc: "Lease takeover Mar 1, great location, no charm", url: "https://www.zillow.com/homedetails/2229-N-Lafayette-St-Denver-CO-80205/63492556_zpid/" },
  { name: "641 Steele St", address: "641 Steele St, Denver, CO 80206", rent: 4000, sqft: 3111, beds: 3, score: 79, hood: "Congress Park", desc: "Tudor bungalow, 7th Ave Historic District. Rose garden, 3111 sqft. Pet policy TBD", url: "https://www.zillow.com/homedetails/641-Steele-St-Denver-CO-80206/13327700_zpid/" },
  { name: "3336 N Lafayette", address: "3336 N Lafayette St", rent: 3690, sqft: 2056, beds: 3, score: 55, hood: "Five Points", desc: "1888 Victorian. Bungalow managed, 31% above Zestimate", url: "https://www.zillow.com/homedetails/3336-N-Lafayette-St-Denver-CO-80205/13305808_zpid/" },
  // Passed (with real scores)
  { name: "2820 Champa St", address: "2820 Champa St", rent: 3950, sqft: 2629, beds: 4, score: 82, hood: "Five Points", desc: "1886 Victorian, exceptional. PASSED: NO PETS + construction", url: "https://www.zillow.com/homedetails/2820-Champa-St-Denver-CO-80205/13307550_zpid/" },
  { name: "920 E 24th Ave", address: "920 E 24th Ave", rent: 4775, sqft: 2000, beds: 3, score: 72, hood: "Five Points", desc: "1890 Queen Anne, San Rafael. PASSED: NO PETS + overpriced", url: "https://www.zillow.com/homedetails/920-E-24th-Ave-Denver-CO-80205/109688098_zpid/" },
  { name: "267 S Franklin St", address: "267 S Franklin St", rent: 3080, sqft: 1211, beds: 2, score: 72, hood: "Washington Park", desc: "1907 Wash Park, stained glass. Check Back Soon availability", url: "https://www.apartments.com/267-s-franklin-st-denver-co/mhz484k/" },
  { name: "The Perrenoud #402", address: "1699 N Downing St #402", rent: 2395, sqft: 1665, beds: 2, score: 68, hood: "Capitol Hill", desc: "1901 building extraordinary, unit modernized. PASSED: NO PETS (HOA)", url: "https://www.realtor.com/rentals/details/1699-N-Downing-St-Apt-402_Denver_CO_80218_M24561-18651" },
  { name: "2358 N Ogden St B", address: "2358 N Ogden St, Unit B", rent: 3625, sqft: 1216, beds: 3, score: 58, hood: "Five Points", desc: "1890 Five Points. PASSED: Furnished corporate, NO PETS", url: "https://www.zillow.com/homedetails/2358-N-Ogden-St-B-Denver-CO-80205/61433505_zpid/" },
  { name: "1770 S Washington", address: "1770 S Washington St", rent: 7535, sqft: 3480, beds: 5, score: 58, hood: "Platt Park", desc: "Architect Carlos Alvarez. PASSED: NO CATS + $7,535 + 4mo lease", url: "https://www.zillow.com/homedetails/1770-S-Washington-St-Denver-CO-80210/13369602_zpid/" },
  { name: "3720 Lowell Blvd", address: "3720 Lowell Blvd", rent: 3600, sqft: 1210, beds: 3, score: 50, hood: "Highland", desc: "1890 Victorian Highland. PASSED: Bungalow co-living", url: "https://www.apartments.com/enchanting-west-highland-victorian-home-by-denver-co/meczdyj/" },
  { name: "1541 E 25th Ave", address: "1541 E 25th Ave", rent: 3290, sqft: 3169, beds: 4, score: 45, hood: "Five Points", desc: "Impressive Whittier property. PASSED: Bungalow co-living", url: "https://www.zillow.com/homedetails/1541-E-25th-Ave-Denver-CO-80205/88905959_zpid/" },
  { name: "1688 Quitman St", address: "1688 Quitman St", rent: 4020, sqft: 1506, beds: 2, score: 35, hood: "Sloan Lake", desc: "2017 modern, zero character. PASSED: Furnished corporate", url: "https://www.zillow.com/homedetails/1688-Quitman-St-ID1013132P-Denver-CO-80204/459288643_zpid/" },
];

// Chart uses properties with rent
const chartProps = properties.filter(p => p.rent);
const hoods = [...new Set(chartProps.map(p => p.hood))];

const traces = hoods.map(hood => {
  const group = chartProps.filter(p => p.hood === hood);
  const color = hoodColors[hood] || '#999';
  return {
    x: group.map(p => p.rent),
    y: group.map(p => p.score),
    mode: 'markers+text', type: 'scatter', name: hood,
    text: group.map(p => p.name),
    textposition: 'top center',
    textfont: { size: 9, color: '#666' },
    hovertext: group.map(p =>
      `<b>${p.name}</b><br>${p.address}<br>` +
      `<b>$${p.rent.toLocaleString()}/mo</b> · ${p.sqft ? p.sqft.toLocaleString() + ' sqft · ' : ''}${p.beds} bed<br>` +
      `Overall Score: ${p.score} · ${p.hood}<br><i>${p.desc}</i>`
    ),
    hoverinfo: 'text',
    marker: {
      size: group.map(p => p.sqft ? Math.max(Math.sqrt(p.sqft) * 0.8, 14) : 14),
      color: color,
      line: { width: 2, color: '#fff' },
      opacity: 0.85, sizemode: 'diameter'
    },
  };
});

const budgetLine = { x: [5000, 5000], y: [0, 100], mode: 'lines', type: 'scatter', line: { color: '#D32F2F', width: 1.5, dash: 'dash' }, hoverinfo: 'none', showlegend: false };
const budgetLabel = { x: [5150], y: [97], mode: 'text', type: 'scatter', text: ['$5K Budget'], textfont: { size: 10, color: '#D32F2F' }, hoverinfo: 'none', showlegend: false };

const layout = {
  xaxis: { title: { text: 'Monthly Rent', font: { size: 13 } }, range: [1400, 8000], gridcolor: '#f0f0f0', zeroline: false, tickprefix: '$', tickformat: ',' },
  yaxis: { title: { text: 'Overall Score', font: { size: 13 } }, range: [0, 105], gridcolor: '#f0f0f0', zeroline: false },
  plot_bgcolor: '#fafafa', paper_bgcolor: '#fff',
  margin: { t: 20, r: 20, b: 60, l: 60 },
  legend: { orientation: 'h', y: -0.15, x: 0.5, xanchor: 'center', font: { size: 11 } },
  hovermode: 'closest',
  shapes: [
    { type: 'rect', x0: 1400, x1: 3500, y0: 75, y1: 105, fillcolor: 'rgba(46,125,50,0.06)', line: { width: 1, color: 'rgba(46,125,50,0.2)', dash: 'dot' }, layer: 'below' },
    { type: 'rect', x0: 5000, x1: 8000, y0: 0, y1: 40, fillcolor: 'rgba(211,47,47,0.04)', line: { width: 1, color: 'rgba(211,47,47,0.15)', dash: 'dot' }, layer: 'below' }
  ],
  annotations: [
    { x: 2000, y: 103, text: 'Sweet Spot', font: { size: 11, color: '#2E7D32' }, showarrow: false, xanchor: 'left' },
    { x: 7800, y: 5, text: 'Avoid', font: { size: 11, color: '#D32F2F' }, showarrow: false, xanchor: 'right' }
  ]
};

Plotly.newPlot('chart', [...traces, budgetLine, budgetLabel], layout, {
  responsive: true, displayModeBar: true,
  modeBarButtonsToRemove: ['lasso2d', 'select2d', 'autoScale2d'], displaylogo: false
});

// Build table
const tbody = document.getElementById('table-body');
properties.sort((a, b) => b.score - a.score).forEach(p => {
  const scoreClass = p.score >= 80 ? 'score-high' : p.score >= 60 ? 'score-med' : p.score >= 40 ? 'score-low' : 'score-bad';
  const hoodColor = hoodColors[p.hood] || '#999';
  const linkDomain = p.url ? new URL(p.url).hostname.replace('www.', '') : '';
  const linkHtml = p.url ? `<a class="listing" href="${p.url}" target="_blank">${linkDomain}</a>` : '<span style="color:#ccc">None</span>';
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td><span class="score-pill ${scoreClass}">${p.score}</span></td>
    <td><strong>${p.name}</strong><br><span style="color:#888;font-size:11px">${p.desc}</span></td>
    <td><span class="hood-pill" style="background:${hoodColor}">${p.hood}</span></td>
    <td>${p.rent ? '$' + p.rent.toLocaleString() : 'Contact'}</td>
    <td>${p.beds}</td>
    <td>${linkHtml}</td>
  `;
  tbody.appendChild(tr);
});
</script>
</body>
</html>
